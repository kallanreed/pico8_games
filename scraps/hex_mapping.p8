pico-8 cartridge // http://www.pico-8.com
version 33
__lua__

dot={x=40,y=40}

function _update()

if (btn(⬆️)) dot.y-=1
if (btn(⬇️)) dot.y+=1
if (btn(⬅️)) dot.x-=1
if (btn(➡️)) dot.x+=1

end

--dirs={"e","ne","nw","w","sw","se"}
cols={7,8,9,10,11,12}

function _draw()
 cls()
 circ(64,64,3)
 
 for oa=0,359 do
  local a=(oa-30)/360
  local ca,sa=cos(a),sin(a)
  local c=cols[flr(oa/360*#cols)+1]
  line(64,64,64+20*ca,64+20*sa,c)
 end
 
 local dt=atan2(dot.x-64,dot.y-64)
 
 -- the trick is that we need to
 -- shift the angle until its on
 -- a boundary between whole indexes
 -- and then adjust the index accordingly.
 
 -- rotate "e" to start at 1 
 local rot_off=.0833 --30/360
 -- convert angle to index
 local ix=flr((dt+rot_off)*#cols)+1
 -- ix will be from 1..n+1 instead
 -- of 0..n-1 so we mod it
 --ix%=#cols
 -- if we don't like mod then
 if (ix>#cols) ix-=#cols
 
 -- but then we need to offset
 -- for dumb array start at 1
 local c=cols[ix]
 printh(ix)
 
 circ(dot.x,dot.y,2,c)
 
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
